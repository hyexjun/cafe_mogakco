<!DOCTYPE html>
  <lang="ko">
  <head>
    {% include "/section/header.html" %}   

    <style>
      .wrap {
        width: 80%;
        margin: 50px auto;
        background-color: antiquewhite;
        display: flex;
        flex-direction: row;
      }
      #cafe {
        margin: 10px;
      }
      .map-box {
        background-color: beige;
        width: 100%;
        border: 1px solid rebeccapurple;
        margin: 10px;
      }
    </style>
    <script>
      $(document).ready(function () {
        bsCustomFileInput.init();
        listing();
      });
      function listing() {
        $.ajax({
          type: 'GET',
          url: '/cafe',
          data: {},
          success: function (response) {
            let data = response['data'];
            console.log(data);

            for (let i = 0; i < data.length; i++) {
              let name = data[i]['name'];
              let address = data[i]['address'];
              let rating = data[i]['rating']; // 지금은 하드코딩이지만 DB에서 하위층 별점 평균내오기

              let temp_html = `
              <div id="cafe" class="card" style="width: 30rem;">
                <div class="card-body">
                  <h5 class="card-title">${name}</h5>
                  <h6 class="card-subtitle mb-2 text-muted">${address}</h6>
                  <span class="card-text">${rating}</span>
                  <span class="card-text">${'⭐'.repeat(
                      rating.toFixed(0)
                    )}</span>
                  <br>
                  <a href="/cafe/${name}" class="card-link">후기 살펴보기</a>
                  <a href="/cafe/${name}" class="card-link">후기 등록하기</a>
                </div>
              </div>
              `;
              $('#card-box').append(temp_html);
            }
          },
        });
      }
    </script>
</head>
  <body>
    <!-- 메인 카페 목록들 -->
    <div class="wrap">
      <div id="card-box"></div>
      <div class="map-box">지도 들어갈 곳?</div>
    </div>
  </body>
  {% include "/section/footer.html" %}
</html>
